# 欢乐树

树链剖分（或者叫 $DFS$ 序）+线段树板子题。

<del>用树状数组加差分代替线段树也可以</del>

复杂度 $O(nlog(n))$

# 金手帕

**倍增跳点/ $dp$ +二进制**

我们知道任意一个数都有二进制表示。

所以跳 $k$ 次，假设他的二进制是 $10101$ 我们可以看成跳 $2^0+2^2+2^4$ 步。

所以对于任意一个 $k$ ，都可以拆装成 $2$ 的次幂的和。

然后我们就可以轻松维护出每个点跳 $2^n$ 步所到达的点。

# 整向量

**数学+拓展欧几里得**

可以列出方程：
$$
\begin{cases}
ax_1+by_1=z_1\\ax_2+by_2=z_2
\end{cases}
$$
显然方程的解是：


$$
\begin{cases}
a=\displaystyle\frac{z_1y_2-z_2y_1}{x_1y_2-x_2y_1}
\\
\displaystyle b=\frac{x_1z_2-x_2z_1}{x_1y_2-x_2y_1}
\end{cases}
$$


接下来分类解的存在性讨论。

如果 $x_1y_2-x_2y_1\neq 0 $ ，直接解方程，判断 $a,b$ 是否为整数。

如果 $x_1 y_2 -x_2 y_1=0$ 。

 * 如果 $x_1/x_2=z_1/z_2$  ，就是说方程组所表示的直线重合，根据 $gcd$ 判断解的存在性，然后再用拓展欧几里得解方程计算 $ax_1+by_1=z_1$ 或 $ax_2+by_2=z_2$ 。
 * 否则，方程组表示的俩直线平行，无解。

可以证明如果答案存在的话，$a,b\leqslant 1e12$ 。

# 签到题

**贪心+思维**

最优方案是先选择最小，假设为 $a_1$ ，然后进行 $n-2$ 次，使得$a_1=a_1-(a_2+\cdots+a_n-1)$。

然后再选择 $n,1$ 使得最后的元素为 $a_2+\cdots+a_n-a_1$ 。

简单证明一下：

第一次操作后一定会出现一项 $a_x-a_y$ 。此时通过上述操作就可以将剩下的数的和都加到这一项上。

而无论如何操作，$a_x$ 和 $a_y$ 在接下来的操作中都保持异号，所以至少一有个数对答案的贡献是负数。

所以只需要让最小的数变成负数即可。

# 排队论

**倍增+二分**

用倍增维护区间最大值，然后对于每一次询问，二分查找第一个比他高 $k$ 的位置在哪里。

复杂度 $O((n+q)logn)$

# 入场券

**数论**

由**唯一分解定理及其应用**可知：

我们可以将 $\displaystyle\prod_{i=1}^{n}a_i$ 分解成质数幂的乘积：
$$
\displaystyle\prod_{i=1}^{n}a_i=p_1^{\alpha_1}\times p_2^{\alpha_2}\times\cdots \times p_k^{\alpha_k}
$$
则其所有约数的个数就是： 
$$
(\alpha_1+1)\times(\alpha_2+1)\times\cdots \times(\alpha_k+1)
$$
所以我们用质数筛将所有质数找出来，然后因数分解即可。